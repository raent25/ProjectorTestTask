(()=>{"use strict";class e{constructor(e,t,r,s){this.selector=document.querySelector(e),this.arr=t,this.placeholder=r,this.id=s}createList(){let e=document.createElement("div");e.classList.add("dropdown-list"),e.id=this.id,e.innerHTML=`<div class="filter__item dropdown-list__active">\n        <div class="dropdown-list__text" data-value>${this.placeholder}</div>\n        <div class="dropdown-list__arrow"><img src="images/arrow.svg" alt="" class="dropdown-list__svg"></div>\n    </div>`;let t=document.createElement("div");return t.classList.add("dropdown-list__options"),this.arr.forEach((e=>{let r=`<div class="dropdown-list__option" data-option="${e}">${e}</div>`;t.innerHTML=t.innerHTML+r})),e.appendChild(t),e}addEvents(e){let t=e.querySelector(".dropdown-list__text");return e.querySelectorAll(".dropdown-list__option").forEach((e=>{e.addEventListener("click",(e=>{t.innerHTML==this.placeholder&&(t.innerHTML=""),e.target.classList.contains("dropdown-list__option-active")?(t.innerHTML=t.innerHTML.replace(new RegExp(`${e.target.innerHTML} `,"g"),""),e.target.classList.remove("dropdown-list__option-active")):(t.innerHTML=t.innerHTML+e.target.innerHTML+" ",e.target.classList.add("dropdown-list__option-active")),""==t.innerHTML&&(t.innerHTML=this.placeholder)}))})),e.querySelector(".filter__item").addEventListener("click",(r=>{e.classList.toggle("dropdown-list-active"),""==t.innerHTML&&(t.innerHTML=this.placeholder)})),document.addEventListener("click",(function(r){e.contains(r.target)||e.classList.remove("dropdown-list-active"),""==t.innerHTML&&(t.innerHTML=this.placeholder)})),e}build(){let e=this.addEvents(this.createList());this.selector.appendChild(e)}}class t extends e{constructor(e,t,r,s){super(e,t,r,s)}createList(){return super.createList()}addEvents(e){let t=e.querySelector(".dropdown-list__text");return e.querySelectorAll(".dropdown-list__option").forEach((r=>{r.addEventListener("click",(r=>{r.target.classList.contains("dropdown-list__option-active")?(r.target.classList.remove("dropdown-list__option-active"),t.innerHTML=this.placeholder):(e.querySelectorAll(".dropdown-list__option").forEach((e=>{e.classList.remove("dropdown-list__option-active")})),r.target.classList.add("dropdown-list__option-active"),t.innerHTML=r.target.innerHTML),e.classList.remove("dropdown-list-active")}))})),e.querySelector(".filter__item").addEventListener("click",(t=>{e.classList.toggle("dropdown-list-active")})),document.addEventListener("click",(function(t){e.contains(t.target)||e.classList.remove("dropdown-list-active")})),e}build(){let e=this.addEvents(this.createList());this.selector.appendChild(e)}}document.querySelector("#artist").addEventListener("input",(function(){let e=this.value.length;document.querySelector(".alertToInput").innerHTML=e>10?"Exceeded character limit. Maximum length is 10 characters.":""}));document.querySelector(".header__back").addEventListener("click",(()=>{history.back()})),window.addEventListener("DOMContentLoaded",(()=>{let r=document.createElement("div");r.id="filter-btn",r.classList.add("btn"),r.innerHTML="Search",new e(".filter",["Rock","Hip Hop","Pop","Classic","Folk"],"Genre","ganre").build(),new t(".filter",["1950-60 рр.","1960-70 рр.","1970-80 рр.","1980-90 рр.","1990-00 рр.","2000-10 рр.","2010-20 рр.","2020-30 рр."],"Decade","decade").build(),new t(".filter",["Ukraine","UK","USA","Germany"],"Country","country").build(),document.querySelector(".filter").append(r),function(){class e{constructor(e,t){this.id=e.id,this.img=e.img,this.song=e.song,this.artist=e.artist,this.year=e.year,this.style=e.style,this.country=e.country,this.parent=document.querySelector(t),this.buildBlock()}buildBlock(){let e=`<div class="record" data-record-id="${this.id}">\n            <div class="record-desc">\n            <div class="record-desc__btnLike" data-record-id="${this.id}"><img src="images/heartdark.svg" class="heartdark" alt=""><img src="images/heartdarkActive.svg" class="heartdarkActive" alt=""></div>\n            <img src="${this.img}" alt="" class="record-desc__img">\n            <p class="record-desc__songName">${this.song}</p>\n            <p class="record-desc__artist">${this.artist}</p>\n            <p class="record-desc__desc">Year:<span class="record-desc__descValue record-desc__year">${this.year}</span></p>\n            <p class="record-desc__desc">Style:<span class="record-desc__descValue record-desc__style">${this.style}</span></p>\n            <p class="record-desc__desc">Country:<span class="record-desc__descValue record-desc__country">${this.country}</span></p>\n        </div>\n            <div class="btn record__btn" data-record-id="${this.id}">Add<object class="record__plus" data="images/plus.svg" type="image/svg+xml"></object></div>\n            <div class="btn record__btn-cansel" data-record-id="${this.id}">Cansel</div>\n        </div>`;this.parent.innerHTML=this.parent.innerHTML+e}}let t={records:[{id:0,img:"images/0.jpg",song:"Wild Dances",artist:"Ruslana",year:2004,style:"Folk",country:"Ukraine"},{id:1,img:"images/1.jpg",song:"Let There Be Rock",artist:"AC/DC",year:1990,style:"Rock",country:"USA"},{id:2,img:"images/2.jpg",song:"Toxicity",artist:"System Of A Down",year:1997,style:"Rock",country:"USA"},{id:3,img:"images/3.jpg",song:"Shakira",artist:"Shakira",year:2014,style:"Pop",country:"USA"},{id:4,img:"images/4.jpg",song:"Yesterday",artist:"The Beatles",year:1966,style:"Rock",country:"UK"},{id:5,img:"images/5.jpg",song:"Sonata No. 1, In G Minor",artist:"Joseph Szigeti, Bach*",year:1931,style:"Classic",country:"USA"},{id:6,img:"images/6.jpg",song:"Deutschland",artist:"Rammstein",year:2019,style:"Rock",country:"Germany"},{id:7,img:"images/7.jpg",song:"The Fame",artist:"Lady Gaga",year:2008,style:"Pop",country:"UK"},{id:8,img:"images/8.jpg",song:"My Name Is",artist:"Eminem",year:1999,style:"Hip Hop",country:"UK"}]};document.querySelector(".records").innerHTML="",document.querySelector(".records").innerHTML="";let r=t.records.length;const s=new URLSearchParams(window.location.search);let i="",a=Math.floor(r/6)+1;if(0!=a){0!=r%6&&(a+=1);for(let e=1;e<a;e++)i+=`<a class="pagination-number" href='?page=${e}' data-pagination='${e}'>${e}</a>`;document.querySelector(".pagination").innerHTML=i}let c=document.querySelectorAll(".pagination-number");if(s.has("page")){let r=s.get("page"),i=6*(r-1),a=6+i;t.records.forEach(((t,r)=>{r>=i&&r<a&&new e(t,".records")})),c.forEach((e=>{e.classList.remove("pagination-active"),e.getAttribute("data-pagination")==r&&(e.classList.contains("pagination-active")||e.classList.add("pagination-active"))}))}else t.records.forEach(((t,r)=>{r<6&&new e(t,".records")}));document.querySelectorAll(".record-desc__btnLike").forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("record-active")}))}))}(),function(){let e=document.querySelectorAll(".record"),t=JSON.parse(localStorage.getItem("data-record-id"))?JSON.parse(localStorage.getItem("data-record-id")):[];e.forEach((e=>{let r=e.getAttribute("data-record-id");t.forEach((t=>{r==t&&(e.classList.add("record-active"),e.querySelector(".record__btn").style.display="none",e.querySelector(".record__btn-cansel").style.display="flex")}))})),e.forEach((e=>{e.querySelector(".record__btn").addEventListener("click",(r=>{e.classList.add("record-active"),e.querySelector(".record__btn").style.display="none",e.querySelector(".record__btn-cansel").style.display="flex",t.push(r.target.getAttribute("data-record-id")),localStorage.setItem("data-record-id",JSON.stringify(t))})),e.querySelector(".record__btn-cansel").addEventListener("click",(r=>{e.classList.remove("record-active"),e.querySelector(".record__btn").style.display="flex",e.querySelector(".record__btn-cansel").style.display="none";let s=t.indexOf(r.target.getAttribute("data-record-id"));t=t.slice(0,s).concat(t.slice(s+1)),localStorage.setItem("data-record-id",JSON.stringify(t))}))}))}()}))})();